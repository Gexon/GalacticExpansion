# ADR-0002: Атомарная запись `state.json`

**Статус**: accepted (по NFR из черновика).  
**Контекст**: состояние симуляции обязано переживать перезапуски и не повреждаться при аварийном завершении процесса.  

## Решение

Пишем состояние атомарно:

1) записываем `state.json.tmp`,
2) заменяем `state.json` (rename/replace).

## Причины

- снижение риска “битого JSON” при сбое в момент записи;
- предсказуемость восстановления.

## Последствия

- нужно продумать бэкапы/версии (например, `state.json.bak`) при обновлениях.
