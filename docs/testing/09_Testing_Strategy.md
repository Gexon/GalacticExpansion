# Стратегия тестирования (GLEX)

**Назначение**: единые правила тестирования и проверки симуляции до релиза.  
**Аудитория**: разработчики.  
**Статус**: draft.  

## Уровни тестирования

### Unit

Цель: проверять “чистую логику” без ModAPI:

- расчёт ресурсов (`EconomySim`),
- переходы стадий (`StageManager`),
- правила лимитов/рейтов,
- миграции `state.json`.

### Integration (локальный dedicated)

Цель: проверить реальную связку с Empyrion ModAPI:

- корректная корреляция requests/events по `seqNr`,
- спавн/удаление сущностей (минимальные сценарии),
- обработка ключевых событий (`Player_ChangedPlayfield`, `Statistics`).

### Scenario / Regression (повторяемые сценарии)

Цель: воспроизводимые чек-листы для регрессии механик:

- старт сервера “с нуля” → создаётся state → `LandingPending`,
- “логистика” (spawn dropship → исчез → spawn yard),
- апгрейд стадии по времени/ресурсам,
- разрушение ключевой сущности → откат/перестройка,
- rate limiting: нагрузочные события не приводят к спаму запросов/команд.

## Основные правила

- Любой баг должен быть воспроизводимым сценарием (описание шагов + ожидаемый лог).
- Для всех критичных решений симуляции лог обязателен (иначе невозможно тестировать).
- Любые опасные действия (AIM/console) должны быть “тестируемы” через лог и ограничены whitelist/лимитами.
