# –ú–æ–¥—É–ª—å: Unit Economy Manager

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** 2 (–í—ã—Å–æ–∫–∏–π)  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** Module_11 (Economy Simulator), Module_04 (Entity Spawner), Module_10 (Threat Director)  
**–°—Ç–∞—Ç—É—Å:** üî¥ –ù–µ –Ω–∞—á–∞—Ç

---

## 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è

Unit Economy Manager —É–ø—Ä–∞–≤–ª—è–µ—Ç **–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –∏ —É—á–µ—Ç–æ–º –±–æ–µ–≤—ã—Ö –µ–¥–∏–Ω–∏—Ü** –∫–æ–ª–æ–Ω–∏–π. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —é–Ω–∏—Ç–æ–≤ –∏ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∏–∏ –ø—Ä–∏ –ø–æ—Ç–µ—Ä—è—Ö.

### –ö–ª—é—á–µ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞

**"–û—â—É—Ç–∏–º–∞—è –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å —é–Ω–∏—Ç–æ–≤"** ‚Äî –∏–≥—Ä–æ–∫ –≤–∏–¥–∏—Ç –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —Å–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π: —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —é–Ω–∏—Ç–æ–≤ –∏ –∞–≤–∞–Ω–ø–æ—Å—Ç–æ–≤ —Ä–µ–∞–ª—å–Ω–æ –æ—Å–ª–∞–±–ª—è–µ—Ç –∫–æ–ª–æ–Ω–∏—é –Ω–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è.

### –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç

**–ë–µ–∑ –º–æ–¥—É–ª—è:**
- ‚ùå –Æ–Ω–∏—Ç—ã —Å–ø–∞–≤–Ω—è—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
- ‚ùå –†–∞–∑—Ä—É—à–µ–Ω–∏–µ –∞–≤–∞–Ω–ø–æ—Å—Ç–æ–≤ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —é–Ω–∏—Ç–æ–≤
- ‚ùå –ë–∞–∑–∞ –º–æ–∂–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —Å–ø–∞–≤–Ω–∏—Ç—å –∑–∞—â–∏—Ç–Ω–∏–∫–æ–≤

**–° –º–æ–¥—É–ª–µ–º:**
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–µ–∑–µ—Ä–≤ —é–Ω–∏—Ç–æ–≤ (–≥–∞—Ä–Ω–∏–∑–æ–Ω)
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –†–∞–∑—Ä—É—à–µ–Ω–∏–µ –∞–≤–∞–Ω–ø–æ—Å—Ç–æ–≤ —Å–Ω–∏–∂–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
- ‚úÖ –ë–∞–∑–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å "–æ–±–µ—Å–∫—Ä–æ–≤–ª–µ–Ω–∞" –∏ –Ω–µ —Å–º–æ–∂–µ—Ç –∑–∞—â–∏—â–∞—Ç—å—Å—è

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

```mermaid
graph TB
    EconomySim[Economy Simulator]
    ThreatDirector[Threat Director]
    EntitySpawner[Entity Spawner]
    
    UnitEconomy[Unit Economy Manager<br/>–≠–¢–û–¢ –ú–û–î–£–õ–¨]
    
    ColonyEvolution[Colony Evolution]
    StructureTracker[Structure Tracker]
    CoreLoop[Core Loop]
    
    EconomySim -->|Production Rate| UnitEconomy
    ThreatDirector -->|Request Units| UnitEconomy
    UnitEconomy -->|Spawn Authorized| EntitySpawner
    ColonyEvolution -->|Stage Changed| UnitEconomy
    StructureTracker -->|Unit Destroyed| UnitEconomy
    CoreLoop -->|Update Production| UnitEconomy
```

---

## 3. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

```csharp
/// <summary>
/// –ü—É–ª –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —é–Ω–∏—Ç–æ–≤ –¥–ª—è –∫–æ–ª–æ–Ω–∏–∏
/// </summary>
public class UnitPool
{
    public int AvailableGuards { get; set; }          // –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∏
    public int MaxGuards { get; set; }                // –ú–∞–∫—Å–∏–º—É–º –≥–∞—Ä–Ω–∏–∑–æ–Ω–∞
    public int AvailablePatrolVessels { get; set; }   // –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ—Ä–∞–±–ª–∏
    public int MaxPatrolVessels { get; set; }
    public int AvailableWarships { get; set; }        // –ë–æ–µ–≤—ã–µ –∫–æ—Ä–∞–±–ª–∏ (CV)
    public int MaxWarships { get; set; }
    public int AvailableDrones { get; set; }          // –î—Ä–æ–Ω—ã –¥–ª—è –≤–æ–ª–Ω
    public int MaxDrones { get; set; }
    
    public float ProductionRate { get; set; }         // –°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ (—é–Ω–∏—Ç–æ–≤/—á–∞—Å)
    public DateTime LastProductionTime { get; set; }
    public float ProductionProgress { get; set; }     // –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å (–¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å)
    
    public List<ActiveUnit> ActiveUnits { get; set; } = new(); // –ê–∫—Ç–∏–≤–Ω—ã–µ —é–Ω–∏—Ç—ã –≤ –º–∏—Ä–µ
}

/// <summary>
/// –ê–∫—Ç–∏–≤–Ω—ã–π —é–Ω–∏—Ç –≤ –∏–≥—Ä–æ–≤–æ–º –º–∏—Ä–µ
/// </summary>
public class ActiveUnit
{
    public int EntityId { get; set; }
    public UnitType Type { get; set; }
    public DateTime SpawnedAt { get; set; }
    public string AssignedRole { get; set; } // "Guard", "Patrol", "Hunter", "Wave"
}

public enum UnitType
{
    Guard,           // –û—Ö—Ä–∞–Ω–Ω–∏–∫ (NPC)
    PatrolVessel,    // –ü–∞—Ç—Ä—É–ª—å–Ω—ã–π –∫–æ—Ä–∞–±–ª—å (SV/HV)
    Warship,         // –ë–æ–µ–≤–æ–π –∫–æ—Ä–∞–±–ª—å (CV)
    Drone,           // –î—Ä–æ–Ω
    EliteHunter      // –≠–ª–∏—Ç–Ω—ã–π –æ—Ö–æ—Ç–Ω–∏–∫
}
```

---

## 4. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```csharp
public interface IUnitEconomyManager
{
    // === –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ===
    bool CanSpawnUnit(Colony colony, UnitType type, int count = 1);
    int GetAvailableCount(Colony colony, UnitType type);
    UnitPool GetUnitPool(Colony colony);
    
    // === –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ ===
    bool ReserveUnits(Colony colony, UnitType type, int count);
    void ProduceUnits(Colony colony, float deltaTime);
    void RegisterActiveUnit(Colony colony, int entityId, UnitType type, string role);
    void RecordUnitLoss(Colony colony, int entityId);
    
    // === –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º ===
    float CalculateProductionRate(Colony colony);
    void RecalculateCapacity(Colony colony);
    void InitializeUnitPool(Colony colony);
    
    // === –í–ª–∏—è–Ω–∏–µ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–π ===
    void OnResourceOutpostDestroyed(Colony colony, string outpostId);
    void OnShipyardDestroyed(Colony colony);
    void OnDroneBaseDestroyed(Colony colony);
    void OnColonyUnderAttack(Colony colony, bool isUnderAttack);
}
```

---

## 5. –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã

### 5.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

```csharp
public bool CanSpawnUnit(Colony colony, UnitType type, int count = 1)
{
    var available = GetAvailableCount(colony, type);
    return available >= count;
}

public int GetAvailableCount(Colony colony, UnitType type)
{
    return type switch
    {
        UnitType.Guard => colony.UnitPool.AvailableGuards,
        UnitType.PatrolVessel => colony.UnitPool.AvailablePatrolVessels,
        UnitType.Warship => colony.UnitPool.AvailableWarships,
        UnitType.Drone => colony.UnitPool.AvailableDrones,
        _ => 0
    };
}
```

### 5.2 –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —é–Ω–∏—Ç–æ–≤

```csharp
public bool ReserveUnits(Colony colony, UnitType type, int count)
{
    if (!CanSpawnUnit(colony, type, count)) return false;
    
    // –£–º–µ–Ω—å—à–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
    switch (type)
    {
        case UnitType.Guard: colony.UnitPool.AvailableGuards -= count; break;
        case UnitType.PatrolVessel: colony.UnitPool.AvailablePatrolVessels -= count; break;
        case UnitType.Warship: colony.UnitPool.AvailableWarships -= count; break;
        case UnitType.Drone: colony.UnitPool.AvailableDrones -= count; break;
    }
    
    return true;
}
```

### 5.3 –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —é–Ω–∏—Ç–æ–≤

```csharp
public void ProduceUnits(Colony colony, float deltaTime)
{
    var productionRate = CalculateProductionRate(colony);
    var productionPerSecond = productionRate / 3600f;
    
    colony.UnitPool.ProductionProgress += productionPerSecond * deltaTime;
    
    if (colony.UnitPool.ProductionProgress >= 1.0f)
    {
        var unitsProduced = (int)colony.UnitPool.ProductionProgress;
        colony.UnitPool.ProductionProgress -= unitsProduced;
        
        DistributeProducedUnits(colony, unitsProduced);
        colony.UnitPool.LastProductionTime = DateTime.UtcNow;
    }
}

private void DistributeProducedUnits(Colony colony, int totalUnits)
{
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Guards > Drones > Vessels > Warships
    var remaining = totalUnits;
    
    // –ü–æ–ø–æ–ª–Ω—è–µ–º Guards
    var guardsNeeded = colony.UnitPool.MaxGuards - colony.UnitPool.AvailableGuards;
    if (guardsNeeded > 0 && remaining > 0)
    {
        var toAdd = Math.Min(guardsNeeded, remaining);
        colony.UnitPool.AvailableGuards += toAdd;
        remaining -= toAdd;
    }
    
    // –ü–æ–ø–æ–ª–Ω—è–µ–º Drones, Vessels, Warships –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ...
}
```

### 5.4 –†–∞—Å—á–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

```csharp
/// <summary>
/// –§–æ—Ä–º—É–ª–∞: ProductionRate = BaseRate √ó (1 + OutpostCount √ó 0.25) √ó 
///          ShipyardBonus √ó DroneBaseBonus √ó AttackPenalty
/// </summary>
public float CalculateProductionRate(Colony colony)
{
    var baseRate = GetBaseProductionRate(colony.Stage);
    var outpostBonus = 1.0f + (colony.ResourceNodes?.Count ?? 0) * 0.25f;
    var shipyardBonus = colony.HasShipyard ? 1.5f : 1.0f;
    var droneBaseBonus = colony.HasDroneBase ? 2.0f : 1.0f;
    var attackPenalty = colony.ThreatLevel >= ThreatLevel.High ? 0.7f : 1.0f;
    
    return baseRate * outpostBonus * shipyardBonus * droneBaseBonus * attackPenalty;
}
```

### 5.5 –£—á–µ—Ç –ø–æ—Ç–µ—Ä—å

```csharp
public void RecordUnitLoss(Colony colony, int entityId)
{
    var unit = colony.UnitPool.ActiveUnits.FirstOrDefault(u => u.EntityId == entityId);
    if (unit == null) return;
    
    colony.UnitPool.ActiveUnits.Remove(unit);
    
    _logger.LogWarning(
        $"Colony {colony.Id}: Lost unit {entityId} ({unit.Type}). " +
        $"Active units remaining: {colony.UnitPool.ActiveUnits.Count}"
    );
    
    // –Æ–Ω–∏—Ç –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø—É–ª! –ù—É–∂–Ω–æ –∂–¥–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –Ω–æ–≤—ã—Ö.
}
```

### 5.6 –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–π

```csharp
public void OnResourceOutpostDestroyed(Colony colony, string outpostId)
{
    colony.ResourceNodes.Remove(colony.ResourceNodes.First(o => o.Id == outpostId));
    colony.UnitPool.ProductionRate = CalculateProductionRate(colony);
    
    _logger.LogWarning(
        $"Colony {colony.Id}: Outpost destroyed! " +
        $"Production rate decreased to {colony.UnitPool.ProductionRate:F2}/hour"
    );
}

public void OnShipyardDestroyed(Colony colony)
{
    colony.HasShipyard = false;
    colony.UnitPool.ProductionRate = CalculateProductionRate(colony);
    
    _logger.LogCritical($"Colony {colony.Id}: SHIPYARD DESTROYED! Cannot produce Warships.");
}
```

---

## 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Threat Director

```csharp
// –í ThreatDirector.SpawnDefendersAsync()
public async Task SpawnDefendersAsync(Colony colony, Vector3 position, int requestedCount)
{
    // –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
    if (!_unitEconomy.CanSpawnUnit(colony, UnitType.Guard, requestedCount))
    {
        var available = _unitEconomy.GetAvailableCount(colony, UnitType.Guard);
        requestedCount = Math.Min(requestedCount, available);
        
        if (requestedCount == 0)
        {
            _logger.LogError($"Colony {colony.Id} has NO guards available!");
            return;
        }
    }
    
    // –®–ê–ì 2: –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
    if (!_unitEconomy.ReserveUnits(colony, UnitType.Guard, requestedCount))
        return;
    
    // –®–ê–ì 3: –°–ø–∞–≤–Ω
    var spawnedIds = await _entitySpawner.SpawnNPCGroupAsync(
        "ZiraxMinigunPatrol", position, requestedCount, colony.FactionId);
    
    // –®–ê–ì 4: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    foreach (var entityId in spawnedIds)
        _unitEconomy.RegisterActiveUnit(colony, entityId, UnitType.Guard, "Defender");
}
```

---

## 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Core Loop

```csharp
// –í SimulationEngine.OnSimulationTick()
public void OnSimulationTick(object state)
{
    var deltaTime = 1.0f;
    
    foreach (var colony in _state.Colonies)
    {
        _economySimulator.UpdateProduction(colony, deltaTime);
        _unitEconomy.ProduceUnits(colony, deltaTime);  // –ù–û–í–û–ï
        
        if (_playerTracker.HasPlayersOnPlayfield(colony.Playfield))
            await _threatDirector.UpdateThreatLevelAsync(colony);
    }
}
```

---

## 8. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```json
{
  "UnitEconomy": {
    "Enabled": true,
    "StageCapacity": {
      "ConstructionYard": {
        "MaxGuards": 2,
        "MaxDrones": 5,
        "ProductionRatePerHour": 1.0
      },
      "BaseL1": {
        "MaxGuards": 6,
        "MaxPatrolVessels": 1,
        "MaxDrones": 10,
        "ProductionRatePerHour": 2.0
      },
      "BaseL2": {
        "MaxGuards": 10,
        "MaxPatrolVessels": 2,
        "MaxWarships": 1,
        "MaxDrones": 20,
        "ProductionRatePerHour": 3.5
      },
      "BaseL3": {
        "MaxGuards": 15,
        "MaxPatrolVessels": 3,
        "MaxWarships": 2,
        "MaxDrones": 30,
        "ProductionRatePerHour": 5.0
      },
      "BaseMax": {
        "MaxGuards": 20,
        "MaxPatrolVessels": 4,
        "MaxWarships": 3,
        "MaxDrones": 50,
        "ProductionRatePerHour": 8.0
      }
    },
    "ProductionModifiers": {
      "ResourceOutpostBonus": 0.25,
      "ShipyardBonus": 0.5,
      "DroneBaseBonus": 1.0,
      "UnderAttackPenalty": -0.3
    }
  }
}
```

---

## 9. –ò–≥—Ä–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ç–∞–∫–∞

**–ë–µ–∑ Unit Economy:**
- –ò–≥—Ä–æ–∫ —É–±–∏–≤–∞–µ—Ç 10 –æ—Ö—Ä–∞–Ω–Ω–∏–∫–æ–≤ ‚Üí –±–∞–∑–∞ —Å–ø–∞–≤–Ω–∏—Ç 10 –Ω–æ–≤—ã—Ö
- ‚ùå –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –º—è—Å–æ—Ä—É–±–∫–∞

**–° Unit Economy:**
- –ò–≥—Ä–æ–∫ —É–±–∏–≤–∞–µ—Ç 10 –æ—Ö—Ä–∞–Ω–Ω–∏–∫–æ–≤ (–æ—Å—Ç–∞–ª–æ—Å—å 4 –≤ —Ä–µ–∑–µ—Ä–≤–µ)
- –ë–∞–∑–∞ —Å–ø–∞–≤–Ω–∏—Ç 4 –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞ (—Ä–µ–∑–µ—Ä–≤ –∏—Å—á–µ—Ä–ø–∞–Ω!)
- –ò–≥—Ä–æ–∫ —É–±–∏–≤–∞–µ—Ç –µ—â–µ 4 ‚Üí –±–∞–∑–∞ **–Ω–µ –º–æ–∂–µ—Ç** —Å–ø–∞–≤–Ω–∏—Ç—å –±–æ–ª—å—à–µ
- ‚úÖ –ß–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç –ø–æ—è–≤—è—Ç—Å—è 2 –Ω–æ–≤—ã—Ö –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞
- ‚úÖ –ò–≥—Ä–æ–∫ –æ—â—É—â–∞–µ—Ç –ø–æ–±–µ–¥—É!

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ

**–ü–ª–∞–Ω –∏–≥—Ä–æ–∫–∞:**
1. –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å 3 –∞–≤–∞–Ω–ø–æ—Å—Ç–∞ ‚Üí ProductionRate –ø–∞–¥–∞–µ—Ç —Å 7.8 –¥–æ 3.5/—á–∞—Å (-55%)
2. –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≤–µ—Ä—Ñ—å ‚Üí –Ω–µ—Ç –Ω–æ–≤—ã—Ö –∫–æ—Ä–∞–±–ª–µ–π
3. –ò—Å—Ç—Ä–µ–±–∏—Ç—å –≥–∞—Ä–Ω–∏–∑–æ–Ω ‚Üí –±–∞–∑–∞ –±–µ–∑–∑–∞—â–∏—Ç–Ω–∞ –Ω–∞ 2+ —á–∞—Å–∞
4. ‚úÖ –ó–∞—Ö–≤–∞—Ç–∏—Ç—å –±–∞–∑—É –±–µ–∑ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è

---

## 10. –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞

| –°—Ç–∞–¥–∏—è | Max Guards | Production Rate | –í—Ä–µ–º—è –≤–æ—Å–ø–æ–ª–Ω–µ–Ω–∏—è |
|--------|------------|-----------------|-------------------|
| ConstructionYard | 2 | 1.0/—á–∞—Å | 2 —á–∞—Å–∞ |
| BaseL1 | 6 | 2.0/—á–∞—Å | 3 —á–∞—Å–∞ |
| BaseL2 | 10 | 3.5/—á–∞—Å | 2.9 —á–∞—Å–∞ |
| BaseL3 | 15 | 5.0/—á–∞—Å | 3 —á–∞—Å–∞ |
| BaseMax | 20 | 8.0/—á–∞—Å | 2.5 —á–∞—Å–∞ |

**–° –±–æ–Ω—É—Å–∞–º–∏ (2 –∞–≤–∞–Ω–ø–æ—Å—Ç–∞ + –≤–µ—Ä—Ñ—å):**
- BaseL2: 3.5 √ó 1.5 √ó 1.5 = 7.875/—á–∞—Å ‚Üí 1.3 —á–∞—Å–∞
- BaseMax: 8.0 √ó 1.5 √ó 1.5 = 18/—á–∞—Å ‚Üí 1.1 —á–∞—Å–∞

---

## 11. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ state.json

```json
{
  "Colonies": [
    {
      "Id": "colony_akua_001",
      "UnitPool": {
        "AvailableGuards": 4,
        "MaxGuards": 10,
        "AvailablePatrolVessels": 1,
        "MaxPatrolVessels": 2,
        "AvailableWarships": 0,
        "MaxWarships": 1,
        "AvailableDrones": 15,
        "MaxDrones": 20,
        "ProductionRate": 4.5,
        "LastProductionTime": "2026-01-29T14:30:00Z",
        "ProductionProgress": 0.3,
        "ActiveUnits": [
          {
            "EntityId": 50020,
            "Type": "Guard",
            "SpawnedAt": "2026-01-29T14:00:00Z",
            "AssignedRole": "BaseDefense"
          }
        ]
      }
    }
  ]
}
```

---

## 12. –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

**–≠—Ç–∞–ø 1-3: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ (4 –¥–Ω—è)**
- [ ] –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] `ProduceUnits()`, `CalculateProductionRate()`
- [ ] `CanSpawnUnit()`, `ReserveUnits()`, `RegisterActiveUnit()`

**–≠—Ç–∞–ø 4-5: –£—á–µ—Ç –ø–æ—Ç–µ—Ä—å –∏ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–π (3 –¥–Ω—è)**
- [ ] `RecordUnitLoss()`
- [ ] `OnResourceOutpostDestroyed()`, `OnShipyardDestroyed()`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Structure Tracker

**–≠—Ç–∞–ø 6-7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (3 –¥–Ω—è)**
- [ ] `RecalculateCapacity()`, `InitializeUnitPool()`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Threat Director –∏ Core Loop
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å state.json —Å—Ö–µ–º—É

**–≠—Ç–∞–ø 8-9: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (4 –¥–Ω—è)**
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é UnitEconomy –≤ Configuration.json
- [ ] Unit-—Ç–µ—Å—Ç—ã –∏ integration-—Ç–µ—Å—Ç—ã
- [ ] –ò–≥—Ä–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞

**–ò—Ç–æ–≥–æ:** ~14 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## 13. –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

- **[Module_11_Economy_Simulator.md](Module_11_Economy_Simulator.md)** ‚Äî –±–∞–∑–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- **[Module_10_Threat_Director.md](Module_10_Threat_Director.md)** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —é–Ω–∏—Ç–æ–≤ –¥–ª—è –∑–∞—â–∏—Ç—ã
- **[Module_04_Entity_Spawner.md](Module_04_Entity_Spawner.md)** ‚Äî —Å–ø–∞–≤–Ω —é–Ω–∏—Ç–æ–≤
- **[Module_07_Colony_Evolution.md](Module_07_Colony_Evolution.md)** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –∞–ø–≥—Ä–µ–π–¥–µ
- **[05_–°—Ö–µ–º–∞_–¥–∞–Ω–Ω—ã—Ö.md](../05_–°—Ö–µ–º–∞_–¥–∞–Ω–Ω—ã—Ö.md)** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ UnitPool –≤ state.json

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 29.01.2026  
**–†–∞–∑–º–µ—Ä:** ~500 —Å—Ç—Ä–æ–∫
