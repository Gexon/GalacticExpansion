# Модуль `EmpyrionGateway`

**Ответственность**: единая точка интеграции с Empyrion ModAPI: отправка requests, приём events, корреляция по `seqNr`, rate limit, безопасные обёртки типов.  
**Аудитория**: разработчики.  
**Статус**: draft.  
**Связанные документы**: [`../02_Архитектурный_план.md`](../02_Архитектурный_план.md), [`../03_Технический_проект.md`](../03_Технический_проект.md).  

## Входы

- Вызовы от модулей домена (например “заспавни сущность”, “получи список структур”).
- Сырые события Empyrion в `Game_Event(CmdId, seqNr, object data)`.

## Выходы

- Отправленные `Game_Request(...)`.
- Нормализованные события/ответы, переданные в доменные модули (через callbacks/очередь событий).

## Инварианты

- Любой `object data` приводится к типу **только** после проверки `CmdId` и ожидаемого контекста.
- Любой request имеет уникальный `seqNr` и зарегистрирован как “ожидаемый”, если нужен ответ.
- Превышение лимитов/ошибки API не приводят к крашу: вместо этого — лог + отказ/повтор по правилам.

## Edge cases

- Ответ на request не пришёл (timeout / playfield выгрузили / ошибка): нужен таймаут и стратегия повтора.
- Пришла неожиданная пара (`CmdId`, `seqNr`): логируем и игнорируем, чтобы не отравить состояние.

## Логи

- отправка request: `CmdId`, `seqNr`, краткий параметр (без спама больших структур);
- результат: успех/ошибка, время ожидания, ретраи;
- срабатывание rate limit.