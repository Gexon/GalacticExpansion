# Placement & Spawn (GLEX)

**Назначение**: правила выбора координат и безопасного спавна сущностей.  
**Аудитория**: разработчики.  
**Статус**: draft.  
**Связанные документы**: [`03_Технический_проект.md`](03_Технический_проект.md), [`../design/02_stages_and_prefabs.md`](../design/02_stages_and_prefabs.md).  

## Проблема

В черновике требований зафиксировано: API может **не гарантировать** надёжное определение поверхности. Поэтому PlacementResolver обязан иметь:

- простые правила выбора точки,
- эвристики корректировки,
- фоллбеки (когда точка “плохая”).

## Базовые правила выбора точки (MVP)

- Точка должна быть:
  - на допустимом расстоянии от игроков/их построек (если такие данные доступны/можно оценить),
  - вне “запретных зон” (spawn protection),
  - в пределах разумных высот/координат playfield.

## Высотные спавны (логистический корабль)

По FR-004:

- корабль спавнится “в воздухе” на высоте `DropShipSpawnAltitude` над ориентировочной точкой.
- далее используется режим:
  - `RealAI`: “полетать” N секунд,
  - `CinematicFallback`: “появился/завис/исчез”.

## Фоллбеки

Если спавн не удался (ошибка/нулевой entityId/ошибка в ответе):

- повторить позже (backoff),
- выбрать другую точку (в пределах лимитов),
- логировать причины отказа.
